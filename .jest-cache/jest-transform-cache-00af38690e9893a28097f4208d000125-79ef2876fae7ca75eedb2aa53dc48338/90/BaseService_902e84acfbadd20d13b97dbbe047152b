bb8eb2603409806a8f592b670e54e137
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Logger_1 = __importDefault(require("@config/Logger"));
const ValidationException_1 = __importDefault(require("@exceptions/ValidationException"));
const RouteException_1 = __importDefault(require("@exceptions/RouteException"));
class BaseService {
    constructor() {
        this.logger = Logger_1.default;
    }
    async execute(operation) {
        try {
            return await operation();
        }
        catch (error) {
            this.logger.error(`Service error: ${error.message}`);
            throw error;
        }
    }
    validateData(data, schema) {
        const { error, value } = schema.validate(data, { abortEarly: false });
        if (error) {
            throw ValidationException_1.default.validation(error.details.map((e) => e.message));
        }
        return value;
    }
    handleNotFound(message = 'Resource not found') {
        throw RouteException_1.default.notFound(message);
    }
    handleUnauthorized(message = 'Unauthorized access') {
        throw RouteException_1.default.unauthorized(message);
    }
}
exports.default = BaseService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRTpcXEZyZWVsYW5jZXJcXG5vZGVqcy1hcGktd3JhcHBlclxcc3JjXFxzZXJ2aWNlc1xcQmFzZVNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSw0REFBb0M7QUFDcEMsMEZBQWtFO0FBQ2xFLGdGQUF3RDtBQUV4RCxNQUFNLFdBQVc7SUFHZjtRQUNFLElBQUksQ0FBQyxNQUFNLEdBQUcsZ0JBQU0sQ0FBQztJQUN2QixDQUFDO0lBRUQsS0FBSyxDQUFDLE9BQU8sQ0FBSSxTQUE4QjtRQUM3QyxJQUFJLENBQUM7WUFDSCxPQUFPLE1BQU0sU0FBUyxFQUFFLENBQUM7UUFDM0IsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxrQkFBbUIsS0FBZSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFDaEUsTUFBTSxLQUFLLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQztJQUVELFlBQVksQ0FBSSxJQUFTLEVBQUUsTUFBd0I7UUFDakQsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQ3RFLElBQUksS0FBSyxFQUFFLENBQUM7WUFDVixNQUFNLDZCQUFtQixDQUFDLFVBQVUsQ0FDbEMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FDekMsQ0FBQztRQUNKLENBQUM7UUFDRCxPQUFPLEtBQVUsQ0FBQztJQUNwQixDQUFDO0lBRUQsY0FBYyxDQUFDLFVBQWtCLG9CQUFvQjtRQUNuRCxNQUFNLHdCQUFjLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxVQUFrQixxQkFBcUI7UUFDeEQsTUFBTSx3QkFBYyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUM3QyxDQUFDO0NBQ0Y7QUFFRCxrQkFBZSxXQUFXLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRTpcXEZyZWVsYW5jZXJcXG5vZGVqcy1hcGktd3JhcHBlclxcc3JjXFxzZXJ2aWNlc1xcQmFzZVNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VydmljZU9wZXJhdGlvbiwgVmFsaWRhdGlvblNjaGVtYSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCBMb2dnZXIgZnJvbSAnQGNvbmZpZy9Mb2dnZXInO1xuaW1wb3J0IFZhbGlkYXRpb25FeGNlcHRpb24gZnJvbSAnQGV4Y2VwdGlvbnMvVmFsaWRhdGlvbkV4Y2VwdGlvbic7XG5pbXBvcnQgUm91dGVFeGNlcHRpb24gZnJvbSAnQGV4Y2VwdGlvbnMvUm91dGVFeGNlcHRpb24nO1xuXG5jbGFzcyBCYXNlU2VydmljZSB7XG4gIHByb3RlY3RlZCBsb2dnZXI6IHR5cGVvZiBMb2dnZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sb2dnZXIgPSBMb2dnZXI7XG4gIH1cblxuICBhc3luYyBleGVjdXRlPFQ+KG9wZXJhdGlvbjogU2VydmljZU9wZXJhdGlvbjxUPik6IFByb21pc2U8VD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBTZXJ2aWNlIGVycm9yOiAkeyhlcnJvciBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHZhbGlkYXRlRGF0YTxUPihkYXRhOiBhbnksIHNjaGVtYTogVmFsaWRhdGlvblNjaGVtYSk6IFQge1xuICAgIGNvbnN0IHsgZXJyb3IsIHZhbHVlIH0gPSBzY2hlbWEudmFsaWRhdGUoZGF0YSwgeyBhYm9ydEVhcmx5OiBmYWxzZSB9KTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IFZhbGlkYXRpb25FeGNlcHRpb24udmFsaWRhdGlvbihcbiAgICAgICAgZXJyb3IuZGV0YWlscy5tYXAoKGU6IGFueSkgPT4gZS5tZXNzYWdlKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlIGFzIFQ7XG4gIH1cblxuICBoYW5kbGVOb3RGb3VuZChtZXNzYWdlOiBzdHJpbmcgPSAnUmVzb3VyY2Ugbm90IGZvdW5kJyk6IG5ldmVyIHtcbiAgICB0aHJvdyBSb3V0ZUV4Y2VwdGlvbi5ub3RGb3VuZChtZXNzYWdlKTtcbiAgfVxuXG4gIGhhbmRsZVVuYXV0aG9yaXplZChtZXNzYWdlOiBzdHJpbmcgPSAnVW5hdXRob3JpemVkIGFjY2VzcycpOiBuZXZlciB7XG4gICAgdGhyb3cgUm91dGVFeGNlcHRpb24udW5hdXRob3JpemVkKG1lc3NhZ2UpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJhc2VTZXJ2aWNlO1xuIl0sInZlcnNpb24iOjN9