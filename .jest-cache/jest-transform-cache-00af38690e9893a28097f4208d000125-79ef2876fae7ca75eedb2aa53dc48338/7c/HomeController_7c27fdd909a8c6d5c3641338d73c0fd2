1af3484ac82c3582e459f6fab1ecef40
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Controller_1 = __importDefault(require("./Controller"));
const SampleException_1 = __importDefault(require("@exceptions/SampleException"));
const HomeResource_1 = __importDefault(require("@resources/HomeResource"));
const ServiceRegistry_1 = __importDefault(require("@container/ServiceRegistry"));
class HomeController extends Controller_1.default {
    constructor() {
        super();
        this.userService = ServiceRegistry_1.default.getService('UserService');
    }
    async getCollectionResponse(_req, res) {
        return this.handleAsync(_req, res, async (_req, res) => {
            const users = await this.userService.getAllUsers();
            return this.response(res, new HomeResource_1.default(users));
        });
    }
    async getSingleResponse(req, res) {
        return this.handleAsync(req, res, async (_req, res) => {
            const user = await this.userService.createUser(req.body);
            return this.response(res, new HomeResource_1.default(user), 201, 'User created successfully');
        });
    }
    async getErrorResponse(req, res) {
        return this.handleAsync(req, res, async (_req, _res) => {
            throw SampleException_1.default.sample('Test Exception');
        });
    }
}
exports.default = HomeController;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRTpcXEZyZWVsYW5jZXJcXG5vZGVqcy1hcGktd3JhcHBlclxcc3JjXFxjb250cm9sbGVyc1xcSG9tZUNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4REFBc0M7QUFDdEMsa0ZBQTBEO0FBQzFELDJFQUFtRDtBQUNuRCxpRkFBeUQ7QUFHekQsTUFBTSxjQUFlLFNBQVEsb0JBQVU7SUFHckM7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxXQUFXLEdBQUcseUJBQWUsQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVELEtBQUssQ0FBQyxxQkFBcUIsQ0FDekIsSUFBb0IsRUFDcEIsR0FBb0I7UUFFcEIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUNyQixJQUFJLEVBQ0osR0FBRyxFQUNILEtBQUssRUFBRSxJQUFvQixFQUFFLEdBQW9CLEVBQUUsRUFBRTtZQUNuRCxNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDbkQsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLHNCQUFZLENBQUMsS0FBSyxDQUFRLENBQUMsQ0FBQztRQUM1RCxDQUFDLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRCxLQUFLLENBQUMsaUJBQWlCLENBQ3JCLEdBQW1CLEVBQ25CLEdBQW9CO1FBRXBCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FDckIsR0FBRyxFQUNILEdBQUcsRUFDSCxLQUFLLEVBQUUsSUFBb0IsRUFBRSxHQUFvQixFQUFFLEVBQUU7WUFDbkQsTUFBTSxJQUFJLEdBQUcsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekQsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUNsQixHQUFHLEVBQ0gsSUFBSSxzQkFBWSxDQUFDLElBQUksQ0FBUSxFQUM3QixHQUFHLEVBQ0gsMkJBQTJCLENBQzVCLENBQUM7UUFDSixDQUFDLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRCxLQUFLLENBQUMsZ0JBQWdCLENBQ3BCLEdBQW1CLEVBQ25CLEdBQW9CO1FBRXBCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FDckIsR0FBRyxFQUNILEdBQUcsRUFDSCxLQUFLLEVBQUUsSUFBb0IsRUFBRSxJQUFxQixFQUFFLEVBQUU7WUFDcEQsTUFBTSx5QkFBZSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FDRixDQUFDO0lBQ0osQ0FBQztDQUNGO0FBRUQsa0JBQWUsY0FBYyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkU6XFxGcmVlbGFuY2VyXFxub2RlanMtYXBpLXdyYXBwZXJcXHNyY1xcY29udHJvbGxlcnNcXEhvbWVDb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vQ29udHJvbGxlcic7XG5pbXBvcnQgU2FtcGxlRXhjZXB0aW9uIGZyb20gJ0BleGNlcHRpb25zL1NhbXBsZUV4Y2VwdGlvbic7XG5pbXBvcnQgSG9tZVJlc291cmNlIGZyb20gJ0ByZXNvdXJjZXMvSG9tZVJlc291cmNlJztcbmltcG9ydCBTZXJ2aWNlUmVnaXN0cnkgZnJvbSAnQGNvbnRhaW5lci9TZXJ2aWNlUmVnaXN0cnknO1xuaW1wb3J0IHsgRXhwcmVzc1JlcXVlc3QsIEV4cHJlc3NSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzJztcblxuY2xhc3MgSG9tZUNvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgcHJpdmF0ZSB1c2VyU2VydmljZTogYW55O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy51c2VyU2VydmljZSA9IFNlcnZpY2VSZWdpc3RyeS5nZXRTZXJ2aWNlKCdVc2VyU2VydmljZScpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29sbGVjdGlvblJlc3BvbnNlKFxuICAgIF9yZXE6IEV4cHJlc3NSZXF1ZXN0LFxuICAgIHJlczogRXhwcmVzc1Jlc3BvbnNlXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLmhhbmRsZUFzeW5jKFxuICAgICAgX3JlcSxcbiAgICAgIHJlcyxcbiAgICAgIGFzeW5jIChfcmVxOiBFeHByZXNzUmVxdWVzdCwgcmVzOiBFeHByZXNzUmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCB0aGlzLnVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlKHJlcywgbmV3IEhvbWVSZXNvdXJjZSh1c2VycykgYXMgYW55KTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgYXN5bmMgZ2V0U2luZ2xlUmVzcG9uc2UoXG4gICAgcmVxOiBFeHByZXNzUmVxdWVzdCxcbiAgICByZXM6IEV4cHJlc3NSZXNwb25zZVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVBc3luYyhcbiAgICAgIHJlcSxcbiAgICAgIHJlcyxcbiAgICAgIGFzeW5jIChfcmVxOiBFeHByZXNzUmVxdWVzdCwgcmVzOiBFeHByZXNzUmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMudXNlclNlcnZpY2UuY3JlYXRlVXNlcihyZXEuYm9keSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlKFxuICAgICAgICAgIHJlcyxcbiAgICAgICAgICBuZXcgSG9tZVJlc291cmNlKHVzZXIpIGFzIGFueSxcbiAgICAgICAgICAyMDEsXG4gICAgICAgICAgJ1VzZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdldEVycm9yUmVzcG9uc2UoXG4gICAgcmVxOiBFeHByZXNzUmVxdWVzdCxcbiAgICByZXM6IEV4cHJlc3NSZXNwb25zZVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVBc3luYyhcbiAgICAgIHJlcSxcbiAgICAgIHJlcyxcbiAgICAgIGFzeW5jIChfcmVxOiBFeHByZXNzUmVxdWVzdCwgX3JlczogRXhwcmVzc1Jlc3BvbnNlKSA9PiB7XG4gICAgICAgIHRocm93IFNhbXBsZUV4Y2VwdGlvbi5zYW1wbGUoJ1Rlc3QgRXhjZXB0aW9uJyk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIb21lQ29udHJvbGxlcjtcbiJdLCJ2ZXJzaW9uIjozfQ==